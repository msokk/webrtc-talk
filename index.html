<!DOCTYPE html>
<!-- Based on Google HTML5 slide template
     http://code.google.com/p/html5slides/ -->
<html>
  <head>
    <title>WebRTC</title>
    <meta charset="utf-8">
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Kameron|Muli|Open+Sans:regular,semibold,italic,italicsemibold&amp;v2">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body style="display: none">

    <section class="slides layout-regular">

      <article class="title">
        <h1>WebRTC</h1>
        <p>
          Mihkel Sokk
          <br>
          HTML5 &lt;Pre&gt;Summer Meetup
        </p>
        <div class="source">
          <a href="http://www.flickr.com/photos/ironrodart/4155664186/sizes/l/in/photostream/">http://www.flickr.com/photos/ironrodart/4155664186/sizes/l/in/photostream/</a>
        </div>
      </article>
      <article>

        <h3>WebRTC is:
        </h3>
        <ul class="build">
          <li>
            Platform for what?
          </li>
          <li>
            Who is doing?
          </li>
        </ul>
      </article>

      <article>
        <h3>Current support</h3>
        Chrome, Opera, Firefox soon, etc
        <a href="http://dev.chromium.org/getting-involved/dev-channel">Chrome</a>
      </article>

      <article>
        <h3>Accessing your camera</h3>
        <section>
          <pre>
&lt;video autoplay controls&gt;&lt;/video&gt;
&lt;script&gt;
  navigator.getUserMedia('video, audio', function(stream) {
    var video = document.querySelector('video');
    video.src = window.URL.createObjectURL(stream);

  }, function(error) {
    // We failed - user denied or there is no camera
    console.log("Failed to get a stream due to", error);
  });
&lt;/script&gt;
          </pre>
        </section>
      </article>

      <article class="demo">
        <h3>Accessing your camera - demo</h3>
        <section>
          <video id="demovideo" autoplay controls></video>
          <br>
          <button id="camerademo" class="demo">Show me</button>
        </section>
      </article>

      <article class="fill">
        <iframe src="http://html5-demos.appspot.com/static/getusermedia/photobooth.html"></iframe>
      </article>

      <article>
        <h3>More demos</h3>
        <ul>
          <li><a href="http://neave.com/webcam/html5/">Neave's HTML5 Webcam Toy</a></li>
          <li><a href="http://apprtc.appspot.com/html/face.html">Face Detection</a><li>
          <li><a href="https://apprtc.appspot.com/">AppRTC - 1:1 video calling app</a></li>
          <li><a href="http://learningthreejs.com/data/live-video-in-webgl/">Live Video in WebGL</a></li>
        </ul>
      </article>

      <article class="fill">
        <h3>CallMap</h3>
        <iframe src="http://sokk.ee:4000"></iframe>
      </article>

      <article>
        <h1>Thanks!</h1>
        <section>
          Read more at <a href="http://www.webrtc.org/">webrtc.org</a>
        </section>
      </article>
    </section>


    <script src="http://html5slides.googlecode.com/svn/trunk/slides.js"></script>
    <script>
      // normalize window.URL
      window.URL || (window.URL = window.webkitURL || window.msURL || window.oURL);


      /**
       * Camera demo
       *
       * gotStream - called when user grants access to camera
       * noStream - called when error occurs or user denies the access of camera
       */
      var gotStream = function(stream) {
        // See http://code.google.com/p/chromium/issues/detail?id=91136
        if(window.location.protocol.match('file')) {
          alert('createObjectURL does not work on the local filesystem in Chrome!');
          return;
        }

        var video = document.querySelector('#demovideo');
        video.src = window.URL.createObjectURL(stream);
      };

      var noStream = function(error) {
        // We failed - user denied or there is no camera
        console.log("Failed to get a stream due to", error);
      };

      var btn = document.querySelector('#camerademo');
      btn.addEventListener('click', function() {

        // Opera has up to date implementation
        if (navigator.getUserMedia) {
          navigator.getUserMedia({video: true}, gotStream, noStream);
        } else {
          navigator.webkitGetUserMedia('video', gotStream, noStream);
        }

      }, false);
    </script>
  </body>
</html>
