
var express = require('./')
  , cluster = require('cluster')
  , app = express();

app.use(express.bodyParser());
app.use(express.cookieParser('something'));
app.use(express.session());

// ab -n 5000 -c 60 -k

app.get('/end', function(req, res){
  res.end('hello');
});
// 4425

app.get('/end-len', function(req, res){
  res.set('Content-Length', 5);
  res.end('hello');
});
// 5674

app.get('/send', function(req, res){
  res.send('hello');
});
// 5324

app.get('/user/:id', function(req, res){
  res.send('user');
});

// var n = 200;
// while (n--) {
//   app.get('/send', function(req, res){
//     res.send('hello');
//   });
// }
// 
// app.get('/', function(req, res){
//   console.log('asdf');
//   res.send('hello');
// });
// // 3390

// if (cluster.isMaster) {
//   var n = 4;
//   while (n--) cluster.fork();
// } else {
  // app.listen(3000);
  console.log('worker listening');
// }


// var http = require('http');
// 
// http.createServer(function(req, res){
//   res.setHeader('Content-Length', 5);
//   res.end('hello');
// }).listen(3000);
// // 10000

require('fs').statSync('qh12zxcv<u>');